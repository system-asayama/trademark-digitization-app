# ログインシステム ドキュメント

このディレクトリには、`login-system-app` の開発・運用に関するドキュメントが格納されています。

## ドキュメント一覧

### 1. [移植ガイド (MIGRATION_GUIDE.md)](./MIGRATION_GUIDE.md)

`login-system-app` を基盤として新しいビジネスアプリケーション（例: `survey-system-app`、`invoice-system-app`）を開発するための詳細な手順を説明しています。

**主な内容:**
- プロジェクトのコピーとGitリポジトリの初期化
- 仮想環境の作成とパッケージのインストール
- データベースの初期化とマイグレーション
- Herokuへのデプロイ手順
- アプリケーション固有の機能追加方法
- トラブルシューティング

**対象読者:**
- Flaskを使用したWebアプリケーション開発の経験がある開発者
- PostgreSQLやSQLiteなどのリレーショナルデータベースの基本的な知識を持つ方
- Herokuへのデプロイ経験がある、または学習意欲のある方

---

### 2. [AVAILABLE_APPSの定義方法ガイド (AVAILABLE_APPS_GUIDE.md)](./AVAILABLE_APPS_GUIDE.md)

`login-system-app` に新しいビジネスアプリケーションを追加する際に、`AVAILABLE_APPS` リストをどのように定義・利用するかを詳細に説明しています。

**主な内容:**
- `AVAILABLE_APPS` の構造と各キーの説明
- アプリケーションのスコープ（`store` vs `tenant`）
- ライセンス管理の仕組み
- データベーステーブルとの連携
- アクセス制御デコレータの使用方法
- UIへの統合方法
- 新しいアプリケーションの追加手順
- Font Awesomeアイコンと背景色の選択

**対象読者:**
- `login-system-app` を基盤として新しいアプリケーションを開発する開発者
- アプリケーションの追加・管理方法を理解したい方
- マルチテナント・マルチストアのアーキテクチャに興味がある方

---

## システムアーキテクチャ概要

### ユーザーレベル

| ユーザーレベル         | 説明                                                                 |
| ---------------------- | -------------------------------------------------------------------- |
| **システム管理者**     | 全テナント横断の最高権限を持ち、テナントやアプリケーションを管理     |
| **テナント管理者**     | 特定のテナント内で店舗や管理者を管理                                 |
| **店舗管理者**         | 特定の店舗内で従業員やアプリケーションを管理                         |
| **従業員**             | 店舗内で業務アプリケーションを利用                                   |

### ビジネスモデル

```
システムプロバイダー（System Provider）
    ↓
コンサルタント/会計士（Consultant/Accountant）
    ↓
エンドユーザー企業（End User Companies）
    ↓
店舗（Stores）
```

各コンサルタント/会計士は、専用のサーバーインスタンスを持ち、複数のエンドユーザー企業（テナント）にサービスを提供します。

---

## 主要なデータベーステーブル

| テーブル名                 | 説明                                   |
| -------------------------- | -------------------------------------- |
| `T_テナント`               | テナント情報                           |
| `T_店舗`                   | 店舗情報                               |
| `T_管理者`                 | 管理者情報（システム、テナント、店舗） |
| `T_従業員`                 | 従業員情報                             |
| `T_テナントアプリ設定`     | テナントレベルのアプリ有効化設定       |
| `T_店舗アプリ設定`         | 店舗レベルのアプリ有効化設定           |

---

## 技術スタック

- **フレームワーク**: Flask (Python)
- **データベース**: PostgreSQL (本番環境), SQLite (開発環境)
- **ORM**: SQLAlchemy
- **マイグレーション**: Flask-Migrate
- **テンプレートエンジン**: Jinja2
- **CSSフレームワーク**: Bootstrap 5
- **デプロイ**: Heroku

---

## 開発ワークフロー

1. **ローカル開発**: SQLiteを使用してローカル環境で開発
2. **Gitコミット**: 変更をGitHubにプッシュ
3. **Herokuデプロイ**: GitHubからHerokuにデプロイ
4. **マイグレーション**: Heroku上でデータベースマイグレーションを実行
5. **動作確認**: 本番環境で動作を確認

---

## サポート

不明な点や問題が発生した場合は、以下の方法でサポートを受けることができます。

- **GitHubイシュー**: https://github.com/system-asayama/login-system-app/issues
- **開発者への連絡**: asayama@example.com

---

## ライセンス

このプロジェクトは、プライベートリポジトリとして管理されています。無断での複製・配布は禁止されています。

---

**最終更新日**: 2025年12月29日
